const btnsCollapse=document.querySelectorAll(".js-btn-collapse"),makeCollapse=e=>{e.preventDefault(),e.currentTarget&&e.currentTarget.parentElement&&e.currentTarget.parentElement.parentElement&&e.currentTarget.parentElement.parentElement.classList.toggle("hidden")};for(let e=0;e<btnsCollapse.length;e++)btnsCollapse[e].addEventListener("click",makeCollapse);const visualization=document.querySelector(".visualization"),palettBoxes=document.querySelectorAll(".color-pallet"),palletBtn=document.querySelectorAll(".js-palett-btn"),removeClasses=()=>{for(let e=1;e<visualization.classList.length;e++)visualization.classList.remove(visualization.classList[e])},addChoosedClass=e=>{let t=e.currentTarget.id;visualization.classList.add(t)},checkBtn=()=>{event.currentTarget.firstElementChild.checked=!0},changePalett=e=>{removeClasses(),addChoosedClass(e),checkBtn(),readRadioForm(e),saveLocalStorage()},handlePalettBtnsClick=function(){for(let e=0;e<palettBoxes.length;e++)palettBoxes[e].addEventListener("click",changePalett)};function removeAtSymbol(e){return e.replace("@","")}handlePalettBtnsClick();const email=document.querySelector(".js-link_email"),emailPlace=document.querySelector(".js-email"),getEmail=()=>{emailPlace.innerHTML='<a href="mailto:'+email.value+'" target="_blank"><i style="opacity:1" class="icon fa fa-envelope js-envelope"></i></a>'};email.addEventListener("change",getEmail);const phone=document.querySelector(".js-link_phone"),phonePlace=document.querySelector(".js-phone"),getPhone=()=>{phonePlace.innerHTML='<a href="tel:+34'+phone.value+'" target="_blank"><i style="opacity:1" class="icon fa fa-mobile-alt js-envelope"></i></a>'};phone.addEventListener("change",getPhone);const linkedin=document.querySelector(".js-link_linkedin"),linkedinPlace=document.querySelector(".js-linkedin"),getLinkedin=()=>{const e=removeAtSymbol(linkedin.value);linkedinPlace.innerHTML='<a href="https://www.linkedin.com/in/'+e+'/" target="_blank"><i style="opacity:1" class="icon fab fa-linkedin-in"></i></a>'};linkedin.addEventListener("change",getLinkedin);const github=document.querySelector(".js-link_github"),githubPlace=document.querySelector(".js-github"),getGithub=()=>{const e=removeAtSymbol(github.value);githubPlace.innerHTML='<a href="https://github.com/'+e+'" target="_blank"><i style="opacity:1" class="icon fab fa-github-alt"></i></a>'};github.addEventListener("change",getGithub);const uploadImage=document.querySelector("#photo"),miniAvatar=document.querySelector(".data__form__image-thumbnail"),profileAvatar=document.querySelector(".visualization__user__img"),fr=new FileReader,writeImage=()=>(fr.result&&(miniAvatar.style.backgroundImage=`url('${fr.result}')`,profileAvatar.style.backgroundImage=`url('${fr.result}')`,readImageValue(fr.result),saveLocalStorage()),fr.result),getImage=()=>{const e=uploadImage.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(e)};uploadImage.addEventListener("change",getImage);const inputForm=document.querySelectorAll(".data__form-item"),dataCard=document.querySelectorAll(".js-visualization-data");inputAddEvent();const inputText=["Nombre Apellido","Front-end developer"],clearForm=()=>{for(let e=0;e<dataCard.length;e++)inputForm[e].value="",dataCard[e].innerText=inputText[e],removeClasses(),localStorage.removeItem("objectLocalStor")},resetPreviewColors=()=>removeClasses(),iconsList=[emailPlace,phonePlace,linkedinPlace,githubPlace],resetPreviewIcons=()=>{for(const e of iconsList)e.firstChild.style.opacity=.5},clearPhoto=()=>{profileAvatar.style.backgroundImage='url("./assets/images/blank-profile.png")',miniAvatar.style.backgroundImage='url("")'},resetPreview=()=>{resetPreviewColors(),clearForm(),resetPreviewIcons(),profileAvatar.style.backgroundImage='url("./assets/images/blank-profile.png")',miniAvatar.style.backgroundImage='url("")'},btnReset=document.querySelector(".js-reset");function sendDataCard(){for(let e=0;e<dataCard.length;e++)""===inputForm[e].value?dataCard[e].innerText=inputText[e]:dataCard[e].innerHTML=inputForm[e].value}function inputAddEvent(){for(let e=0;e<dataCard.length;e++)inputForm[e].addEventListener("keyup",sendDataCard)}btnReset.addEventListener("click",resetPreview);const inputFormRadio=document.querySelectorAll(".js-palett-choose");let objectLocalStor={palette:1,name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:""};function readInputValue(){for(let e=0;e<inputForm.length;e++)objectLocalStor[inputForm[e].name]=inputForm[e].value,inputForm[e]===phone?objectLocalStor[inputForm[e].name]="+34 "+inputForm[e].value:inputForm[e]===github&&(objectLocalStor[inputForm[e].name]=removeAtSymbol(inputForm[e].value))}function readRadioForm(e){const t=e.currentTarget;objectLocalStor.palette=parseInt(t.dataset.value)}function readImageValue(e){return objectLocalStor.photo=e}function createLocalStorage(){readInputValue(),readImageValue(writeImage()),saveLocalStorage()}const form=document.querySelector(".js-data__input");function saveLocalStorage(){localStorage.removeItem("objectLocalStor"),localStorage.setItem("objectLocalStor",JSON.stringify(objectLocalStor))}function setLocalStorage(){return JSON.parse(localStorage.getItem("objectLocalStor"))}function autoFillInput(){const e=setLocalStorage();if(e)for(let t=0;t<inputForm.length;t++){let a=e[inputForm[t].name];if(inputForm[t].value=a,"phone"===inputForm[t].name){const a=e.phone.replace("+34 ","");inputForm[t].value=a}}}function setRadioValue(){const e=setLocalStorage();if(e)for(let t=0;t<palletBtn.length;t++)t===e.palette&&(palletBtn[t-1].checked=!0)}function chargeImage(){const e=setLocalStorage();e&&(miniAvatar.style.backgroundImage=`url('${e.photo}')`,profileAvatar.style.backgroundImage=`url('${e.photo}')`)}function loadLocalStorage(){autoFillInput(),setRadioValue(),chargeImage(),getGithub(),getEmail(),getLinkedin(),getPhone()}form.addEventListener("change",createLocalStorage),loadLocalStorage();let buttonShare=document.querySelector(".js-saveLocalStorage");const responseURL=document.querySelector(".js-response"),showResultURL=document.querySelector(".share__twitter");function showURL(e){e.success?responseURL.innerHTML="<a href="+e.cardURL+">"+e.cardURL+"</a>":e.error&&(responseURL.innerHTML="ERROR:"+e.error)}function sendRequest(e){fetch("https://us-central1-awesome-cards-c6f0.6f0.coudfunctions.net/card/",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then(function(e){return e.json()}).then(function(e){showURL(e)}).catch(function(e){console.log(e)})}function createCard(e){e.preventDefault(),sendRequest(objectLocalStor),showURL(objectLocalStor)}buttonShare.addEventListener("click",createCard);