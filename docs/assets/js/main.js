const btnsCollapse=document.querySelectorAll(".js-btn-collapse"),makeCollapse=e=>{e.preventDefault(),e.currentTarget&&e.currentTarget.parentElement&&e.currentTarget.parentElement.parentElement&&e.currentTarget.parentElement.parentElement.classList.toggle("hidden")};for(let e=0;e<btnsCollapse.length;e++)btnsCollapse[e].addEventListener("click",makeCollapse);const visualization=document.querySelector(".visualization"),palettBoxes=document.querySelectorAll(".color-pallet"),palletBtn=document.querySelectorAll(".js-palett-btn"),removeClasses=()=>{for(let e=1;e<visualization.classList.length;e++)visualization.classList.remove(visualization.classList[e])},addChoosedClass=e=>{let t=e.currentTarget.id;visualization.classList.add(t)},checkBtn=()=>{event.currentTarget.firstElementChild.checked=!0},changePalett=e=>{removeClasses(),addChoosedClass(e),checkBtn(),readRadioForm(e),saveLocalStorage()},handlePalettBtnsClick=function(){for(let e=0;e<palettBoxes.length;e++)palettBoxes[e].addEventListener("click",changePalett)};function removeAtSymbol(e){return e.replace("@","")}handlePalettBtnsClick();const email=document.querySelector(".js-link_email"),emailPlace=document.querySelector(".js-email"),getEmail=()=>{email.value?emailPlace.innerHTML='<a href="mailto:'+email.value+'" target="_blank"><i style="opacity:1" class="icon fa fa-envelope js-envelope"></i></a>':emailPlace.firstElementChild.style.opacity=.5};email.addEventListener("keyup",getEmail);const phone=document.querySelector(".js-link_phone"),phonePlace=document.querySelector(".js-phone"),getPhone=()=>{phone.value?phonePlace.innerHTML='<a href="tel:+34'+phone.value+'" target="_blank"><i style="opacity:1" class="icon fa fa-mobile-alt js-envelope"></i></a>':phonePlace.firstElementChild.style.opacity=.5};phone.addEventListener("keyup",getPhone);const linkedin=document.querySelector(".js-link_linkedin"),linkedinPlace=document.querySelector(".js-linkedin"),getLinkedin=()=>{const e=removeAtSymbol(linkedin.value);e?linkedinPlace.innerHTML='<a href="https://www.linkedin.com/in/'+e+'/" target="_blank"><i style="opacity:1" class="icon fab fa-linkedin-in"></i></a>':linkedinPlace.firstElementChild.style.opacity=.5};linkedin.addEventListener("keyup",getLinkedin);const github=document.querySelector(".js-link_github"),githubPlace=document.querySelector(".js-github"),getGithub=()=>{const e=removeAtSymbol(github.value);e?githubPlace.innerHTML='<a href="https://github.com/'+e+'" target="_blank"><i style="opacity:1" class="icon fab fa-github-alt"></i></a>':githubPlace.firstElementChild.style.opacity=.5};github.addEventListener("keyup",getGithub);const inputForm=document.querySelectorAll(".data__form-item"),dataCard=document.querySelectorAll(".js-visualization-data");inputAddEvent();const inputText=["Nombre Apellido","Front-end developer"],clearForm=()=>{for(let e=0;e<dataCard.length;e++)inputForm[e].value="",dataCard[e].innerText=inputText[e],removeClasses(),localStorage.removeItem("objectLocalStor")},resetPreviewColors=()=>removeClasses(),iconsList=[emailPlace,phonePlace,linkedinPlace,githubPlace],resetPreviewIcons=()=>{for(const e of iconsList)e.firstElementChild.style.opacity=.5},resetPreview=()=>{resetPreviewColors(),clearForm(),resetPreviewIcons(),clearPhoto()},btnReset=document.querySelector(".js-reset");btnReset.addEventListener("click",resetPreview);const uploadImage=document.querySelector("#photo"),miniAvatar=document.querySelector(".data__form__image-thumbnail"),profileAvatar=document.querySelector(".visualization__user__img"),fr=new FileReader,getPhotoSaved=()=>{profileAvatar.style.backgroundImage=' url("objectLocalStor.photo")'},clearPhoto=()=>{profileAvatar.style.backgroundImage='url("./assets/images/blank-profile.png")',miniAvatar.style.backgroundImage='url("")'},writeImage=()=>{null!==fr.result?(miniAvatar.style.backgroundImage=`url('${fr.result}')`,profileAvatar.style.backgroundImage=`url('${fr.result}')`,readImageValue(fr.result),saveLocalStorage()):clearPhoto()},getImage=()=>{const e=uploadImage.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(e)};function sendDataCard(){for(let e=0;e<dataCard.length;e++)""===inputForm[e].value?dataCard[e].innerText=inputText[e]:dataCard[e].innerHTML=inputForm[e].value}function inputAddEvent(){for(let e=0;e<dataCard.length;e++)inputForm[e].addEventListener("keyup",sendDataCard)}uploadImage.addEventListener("change",getImage);const inputFormRadio=document.querySelectorAll(".js-palett-choose");let objectLocalStor={palette:1,name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:""};function readInputValue(){for(let e=0;e<inputForm.length;e++)objectLocalStor[inputForm[e].name]=inputForm[e].value,inputForm[e]===phone?objectLocalStor[inputForm[e].name]="+34 "+inputForm[e].value:inputForm[e]===github&&(objectLocalStor[inputForm[e].name]=removeAtSymbol(inputForm[e].value))}function readRadioForm(e){const t=e.currentTarget;objectLocalStor.palette=parseInt(t.dataset.value)}function readImageValue(e){return objectLocalStor.photo=e}function createLocalStorage(){readInputValue(),readImageValue(writeImage()),saveLocalStorage()}const form=document.querySelector(".js-data__input");function saveLocalStorage(){localStorage.removeItem("objectLocalStor"),localStorage.setItem("objectLocalStor",JSON.stringify(objectLocalStor))}function setLocalStorage(){let e=localStorage.getItem("objectLocalStor");return JSON.parse(e)}function autoFillInput(){const e=setLocalStorage();if(e)for(let t=0;t<inputForm.length;t++){let a=e[inputForm[t].name];if(inputForm[t].value=a,"phone"===inputForm[t].name){const a=e.phone.replace("+34 ","");inputForm[t].value=a}}}function setRadioValue(){const e=setLocalStorage();if(e)for(let t=0;t<palletBtn.length;t++)t===e.palette&&(palletBtn[t-1].checked=!0)}function chargeImage(){const e=setLocalStorage();e.photo&&(miniAvatar.style.backgroundImage=`url('${e.photo}')`,profileAvatar.style.backgroundImage=`url('${e.photo}')`)}function loadLocalStorage(){autoFillInput(),setRadioValue(),chargeImage(),getGithub(),getEmail(),getLinkedin(),getPhone(),sendDataCard()}form.addEventListener("change",createLocalStorage),loadLocalStorage();let buttonShare=document.querySelector(".js-saveLocalStorage");const responseURL=document.querySelector(".js-response"),showResultURL=document.querySelector(".share__twitter"),twitterURL=document.querySelector(".sharetwitter"),tweet="https://twitter.com/intent/tweet?text=Esta%20es%20la%20tarjeta%20que%20he%20creado%20con%20Awesome%20Profile%20Cards";function showURL(e){showResultURL.classList.remove("js-hidden"),e.success?(responseURL.innerHTML="<a href="+e.cardURL+" target = 'blank' class='sharetwitter share__twitter__link'>"+e.cardURL+"</a>",twitterURL.href=tweet+e.cardURL):responseURL.innerHTML="ERROR:"+e.error}function sendRequest(e){fetch("https://us-central1-awesome-cards-cf6f0.cloudfunctions.net/card/",{method:"POST",headers:{"content-type":"application/json"},body:e}).then(function(e){return e.json()}).then(function(e){showURL(e),disableShareButton(e)}).catch(function(e){console.log(e)})}function disableShareButton(e){e.success&&(buttonShare.disabled=!0)}function createCard(e){e.preventDefault(),sendRequest(localStorage.getItem("objectLocalStor"))}buttonShare.addEventListener("click",createCard);